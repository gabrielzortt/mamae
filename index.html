<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agência da Mamãe</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
body{margin:0;font-family:sans-serif;background:#f8f9fa;color:#333;}
header{background:#007bff;color:white;padding:2rem;text-align:center;position:relative;}
#banner-img{width:100%;height:400px;object-fit:cover;border-radius:10px;margin-bottom:1rem;}
section{max-width:1200px;margin:auto;padding:2rem;}
h2{margin-bottom:20px;font-size:28px;}
#produtos-lista{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;}
.produto-card{background:white;padding:1rem;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);text-align:center;}
.produto-card img{width:100%;height:200px;object-fit:cover;border-radius:10px;}
footer{background:#222;color:white;padding:1rem;text-align:center;margin-top:2rem;}
.video-card{position:relative;padding-top:56.25%;margin-bottom:1rem;}
.video-card iframe{position:absolute;top:0;left:0;width:100%;height:100%;}
</style>
</head>
<body>

<header>
  <h1 id="banner-texto">Banner</h1>
  <img id="banner-img" src="" alt="Banner">
</header>

<section id="apresentacao">
  <h2>Apresentação</h2>
  <p id="apresentacao-texto">Apresentação</p>
</section>

<section id="produtos">
  <h2>Produtos / Serviços</h2>
  <div id="produtos-lista"></div>
</section>

<section id="videos">
  <h2>Vídeos / Anúncios</h2>
  <div id="videos-lista"></div>
</section>

<footer>
  <p id="rodape-texto">Rodapé</p>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore, doc, getDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";
import { getStorage, ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-storage.js";

const firebaseConfig = {
apiKey: "AIzaSyBt2_hFx7ppxdqchzOhmMWXFrsKXsORy5U",
authDomain: "mamae-6ced3.firebaseapp.com",
projectId: "mamae-6ced3",
storageBucket: "mamae-6ced3.appspot.com",
messagingSenderId: "783662269266",
appId: "1:783662269266:web:bd7dd7e5f31c13801ff08b",
measurementId: "G-QMPJJ45C50"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const storage = getStorage(app);

async function carregarSite(){
  const siteSnap = await getDoc(doc(db,"site","conteudo"));
  if(siteSnap.exists()){
    const d = siteSnap.data();
    document.getElementById("banner-texto").innerText=d.banner||"Banner";
    document.getElementById("apresentacao-texto").innerText=d.apresentacao||"Apresentação";
    document.getElementById("rodape-texto").innerText=d.rodape||"Rodapé";
    if(d.bannerImagem){
      const url = await getDownloadURL(ref(storage,d.bannerImagem));
      document.getElementById("banner-img").src=url;
    }
  }
  carregarProdutos();
  carregarVideos();
}

async function carregarProdutos(){
  const produtosSnap = await getDocs(collection(db,"produtos"));
  const produtosDiv = document.getElementById("produtos-lista");
  produtosDiv.innerHTML="";
  produtosSnap.forEach(async(docSnap)=>{
    const p = docSnap.data();
    let imgUrl="";
    if(p.imagem){ imgUrl = await getDownloadURL(ref(storage,p.imagem)); }
    produtosDiv.innerHTML+=`
    <div class="produto-card">
      <img src="${imgUrl}" alt="${p.nome}">
      <h3>${p.nome}</h3>
      <p>${p.descricao}</p>
      <p><strong>R$ ${p.preco}</strong></p>
    </div>`;
  });
}

async function carregarVideos(){
  const videosSnap = await getDocs(collection(db,"videos"));
  const videosDiv = document.getElementById("videos-lista");
  videosDiv.innerHTML="";
  videosSnap.forEach(docSnap=>{
    const v = docSnap.data();
    if(v.link){
      videosDiv.innerHTML+=`
      <div class="video-card">
        <iframe src="${v.link}" frameborder="0" allowfullscreen></iframe>
      </div>`;
    }
  });
}

window.onload = carregarSite;
</script>

</body>
</html>
