<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agência da Mamãe</title>
<link rel="stylesheet" href="style.css">
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getFirestore, doc, getDoc, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";
  import { getStorage, ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBt2_hFx7ppxdqchzOhmMWXFrsKXsORy5U",
    authDomain: "mamae-6ced3.firebaseapp.com",
    projectId: "mamae-6ced3",
    storageBucket: "mamae-6ced3.appspot.com",
    messagingSenderId: "783662269266",
    appId: "1:783662269266:web:bd7dd7e5f31c13801ff08b",
    measurementId: "G-QMPJJ45C50"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const storage = getStorage(app);

  // Função para carregar o conteúdo principal do site
  async function carregarSite() {
    const siteDoc = doc(db, "site", "conteudo");
    const siteSnap = await getDoc(siteDoc);
    if(siteSnap.exists()) {
      document.getElementById("banner-texto").innerText = siteSnap.data().banner || "Banner";
      document.getElementById("apresentacao-texto").innerText = siteSnap.data().apresentacao || "Apresentação";
      document.getElementById("rodape-texto").innerText = siteSnap.data().rodape || "Rodapé";
      // Se tiver link de banner
      if(siteSnap.data().bannerImagem){
        const url = await getDownloadURL(ref(storage, siteSnap.data().bannerImagem));
        document.getElementById("banner-img").src = url;
      }
    }
    carregarProdutos();
  }

  // Função para carregar produtos
  async function carregarProdutos() {
    const produtosCol = collection(db, "produtos");
    const produtosSnap = await getDocs(produtosCol);
    const produtosDiv = document.getElementById("produtos-lista");
    produtosDiv.innerHTML = "";
    produtosSnap.forEach(async (docSnap) => {
      let produto = docSnap.data();
      let imgUrl = "";
      if(produto.imagem){
        imgUrl = await getDownloadURL(ref(storage, produto.imagem));
      }
      produtosDiv.innerHTML += `
        <div class="produto-card">
          <img src="${imgUrl}" alt="${produto.nome}">
          <h3>${produto.nome}</h3>
          <p>${produto.descricao}</p>
          <p><strong>R$ ${produto.preco}</strong></p>
        </div>
      `;
    });
  }

  window.onload = carregarSite;
</script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
body{font-family:sans-serif;margin:0;padding:0;background:#f8f9fa;color:#333;}
header{background:#007bff;color:white;padding:2rem;text-align:center;}
#banner-img{width:100%;max-height:400px;object-fit:cover;margin-bottom:1rem;}
#produtos-lista{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem;padding:2rem;}
.produto-card{background:white;padding:1rem;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1);text-align:center;}
footer{background:#222;color:white;padding:1rem;text-align:center;margin-top:2rem;}
</style>
</head>
<body>
<header>
  <h1 id="banner-texto">Banner</h1>
  <img id="banner-img" src="" alt="Banner">
</header>

<section id="apresentacao">
  <h2>Apresentação</h2>
  <p id="apresentacao-texto">Apresentação</p>
</section>

<section id="produtos">
  <h2>Produtos / Serviços</h2>
  <div id="produtos-lista"></div>
</section>

<footer>
  <p id="rodape-texto">Rodapé</p>
</footer>
</body>
</html>
